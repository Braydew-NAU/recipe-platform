<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= recipe.title %> | PlatePal</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <%- include('partials/header') %>

  <div class="container">
    <div class="auth-card">
      <img src="<%= recipe.image_url || 'https://via.placeholder.com/600x300' %>"
           alt="<%= recipe.title %>" style="width:100%; border-radius:8px; margin-bottom:1rem;">

      <h2><%= recipe.title %></h2>
      <p><strong>Cuisine:</strong> <%= recipe.cuisine || 'â€”' %></p>
      <p><strong>Cooking Time:</strong> <%= recipe.cooking_time %> mins</p>
      <p><strong>Difficulty:</strong> <%= recipe.difficulty %></p>
      <% if (ratingCount > 0) { %>
        <p><strong>Rating:</strong> <%= rating %>/5 (based on <%= ratingCount %> reviews)</p>
      <% } else { %>
        <p><strong>Rating:</strong> No ratings yet.</p>
      <% } %>

      <h3>Ingredients</h3>
      <p><%= recipe.ingredients.replace(/\n/g, '<br>') %></p>

      <h3>Instructions</h3>
      <p><%= recipe.instructions.replace(/\n/g, '<br>') %></p>

      <% if (user) { %>
        <form action="/recipe/<%= recipe.id %>/save" method="POST" style="margin-top:1rem;">
          <button type="submit" class="btn btn-secondary">Save Recipe</button>
        </form>
      <% } else { %>
        <p><a href="/signin">Sign in</a> to save this recipe.</p>
      <% } %>
    </div>
  </div>

  <%- include('partials/footer') %>
</body>
</html>
